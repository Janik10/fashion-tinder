{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport { create } from 'zustand';\nimport { useAuthStore } from \"./auth\";\nimport { API_URL } from \"../config\";\nexport var useItemStore = create(function (set, get) {\n  return {\n    feed: [],\n    savedItems: [],\n    isLoading: false,\n    error: null,\n    loadFeed: function () {\n      var _loadFeed = _asyncToGenerator(function* (cursor) {\n        try {\n          set({\n            isLoading: true,\n            error: null\n          });\n          var token = useAuthStore.getState().token;\n          var response = yield fetch(`${API_URL}/feed${cursor ? `?cursor=${cursor}` : ''}`, {\n            headers: {\n              Authorization: `Bearer ${token}`\n            }\n          });\n          var data = yield response.json();\n          if (!response.ok) throw new Error(data.message);\n          set({\n            feed: cursor ? [].concat(_toConsumableArray(get().feed), _toConsumableArray(data.items)) : data.items,\n            isLoading: false\n          });\n        } catch (error) {\n          set({\n            isLoading: false,\n            error: error instanceof Error ? error.message : 'Failed to load feed'\n          });\n          throw error;\n        }\n      });\n      function loadFeed(_x) {\n        return _loadFeed.apply(this, arguments);\n      }\n      return loadFeed;\n    }(),\n    loadSavedItems: function () {\n      var _loadSavedItems = _asyncToGenerator(function* () {\n        try {\n          set({\n            isLoading: true,\n            error: null\n          });\n          var token = useAuthStore.getState().token;\n          var response = yield fetch(`${API_URL}/me/saves`, {\n            headers: {\n              Authorization: `Bearer ${token}`\n            }\n          });\n          var data = yield response.json();\n          if (!response.ok) throw new Error(data.message);\n          set({\n            savedItems: data,\n            isLoading: false\n          });\n        } catch (error) {\n          set({\n            isLoading: false,\n            error: error instanceof Error ? error.message : 'Failed to load saved items'\n          });\n          throw error;\n        }\n      });\n      function loadSavedItems() {\n        return _loadSavedItems.apply(this, arguments);\n      }\n      return loadSavedItems;\n    }(),\n    likeItem: function () {\n      var _likeItem = _asyncToGenerator(function* (itemId) {\n        try {\n          set({\n            error: null\n          });\n          var token = useAuthStore.getState().token;\n          var response = yield fetch(`${API_URL}/interactions/like/${itemId}`, {\n            method: 'POST',\n            headers: {\n              Authorization: `Bearer ${token}`\n            }\n          });\n          if (!response.ok) {\n            var data = yield response.json();\n            throw new Error(data.message);\n          }\n        } catch (error) {\n          set({\n            error: error instanceof Error ? error.message : 'Failed to like item'\n          });\n          throw error;\n        }\n      });\n      function likeItem(_x2) {\n        return _likeItem.apply(this, arguments);\n      }\n      return likeItem;\n    }(),\n    passItem: function () {\n      var _passItem = _asyncToGenerator(function* (itemId) {\n        try {\n          set({\n            error: null\n          });\n          var token = useAuthStore.getState().token;\n          var response = yield fetch(`${API_URL}/interactions/pass/${itemId}`, {\n            method: 'POST',\n            headers: {\n              Authorization: `Bearer ${token}`\n            }\n          });\n          if (!response.ok) {\n            var data = yield response.json();\n            throw new Error(data.message);\n          }\n        } catch (error) {\n          set({\n            error: error instanceof Error ? error.message : 'Failed to pass item'\n          });\n          throw error;\n        }\n      });\n      function passItem(_x3) {\n        return _passItem.apply(this, arguments);\n      }\n      return passItem;\n    }(),\n    saveItem: function () {\n      var _saveItem = _asyncToGenerator(function* (itemId) {\n        try {\n          set({\n            error: null\n          });\n          var token = useAuthStore.getState().token;\n          var response = yield fetch(`${API_URL}/interactions/save/${itemId}`, {\n            method: 'POST',\n            headers: {\n              Authorization: `Bearer ${token}`\n            }\n          });\n          if (!response.ok) {\n            var data = yield response.json();\n            throw new Error(data.message);\n          }\n          yield get().loadSavedItems();\n        } catch (error) {\n          set({\n            error: error instanceof Error ? error.message : 'Failed to save item'\n          });\n          throw error;\n        }\n      });\n      function saveItem(_x4) {\n        return _saveItem.apply(this, arguments);\n      }\n      return saveItem;\n    }()\n  };\n});","map":{"version":3,"names":["create","useAuthStore","API_URL","useItemStore","set","get","feed","savedItems","isLoading","error","loadFeed","_loadFeed","_asyncToGenerator","cursor","token","getState","response","fetch","headers","Authorization","data","json","ok","Error","message","concat","_toConsumableArray","items","_x","apply","arguments","loadSavedItems","_loadSavedItems","likeItem","_likeItem","itemId","method","_x2","passItem","_passItem","_x3","saveItem","_saveItem","_x4"],"sources":["E:/fashion-tinder/frontend/src/store/items.ts"],"sourcesContent":["import { create } from 'zustand';\r\nimport type { Item } from '../types/item';\r\nimport { useAuthStore } from './auth';\r\nimport { API_URL } from '../config';\r\nimport { StateCreator } from 'zustand';\r\n\r\ninterface ItemState {\r\n  feed: Item[];\r\n  savedItems: Item[];\r\n  isLoading: boolean;\r\n  error: string | null;\r\n  loadFeed: (cursor?: string) => Promise<void>;\r\n  loadSavedItems: () => Promise<void>;\r\n  likeItem: (itemId: string) => Promise<void>;\r\n  passItem: (itemId: string) => Promise<void>;\r\n  saveItem: (itemId: string) => Promise<void>;\r\n}\r\n\r\nexport const useItemStore = create<ItemState>((set: any, get: any) => ({\r\n  feed: [],\r\n  savedItems: [],\r\n  isLoading: false,\r\n  error: null,\r\n\r\n  loadFeed: async (cursor?: string) => {\r\n    try {\r\n      set({ isLoading: true, error: null });\r\n      const token = useAuthStore.getState().token;\r\n      const response = await fetch(\r\n        `${API_URL}/feed${cursor ? `?cursor=${cursor}` : ''}`,\r\n        {\r\n          headers: {\r\n            Authorization: `Bearer ${token}`,\r\n          },\r\n        }\r\n      );\r\n\r\n      const data = await response.json();\r\n      if (!response.ok) throw new Error(data.message);\r\n\r\n      set({\r\n        feed: cursor ? [...get().feed, ...data.items] : data.items,\r\n        isLoading: false,\r\n      });\r\n    } catch (error) {\r\n      set({\r\n        isLoading: false,\r\n        error: error instanceof Error ? error.message : 'Failed to load feed',\r\n      });\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  loadSavedItems: async () => {\r\n    try {\r\n      set({ isLoading: true, error: null });\r\n      const token = useAuthStore.getState().token;\r\n      const response = await fetch(`${API_URL}/me/saves`, {\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n      });\r\n\r\n      const data = await response.json();\r\n      if (!response.ok) throw new Error(data.message);\r\n\r\n      set({ savedItems: data, isLoading: false });\r\n    } catch (error) {\r\n      set({\r\n        isLoading: false,\r\n        error: error instanceof Error ? error.message : 'Failed to load saved items',\r\n      });\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  likeItem: async (itemId: string) => {\r\n    try {\r\n      set({ error: null });\r\n      const token = useAuthStore.getState().token;\r\n      const response = await fetch(`${API_URL}/interactions/like/${itemId}`, {\r\n        method: 'POST',\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n      });\r\n\r\n      if (!response.ok) {\r\n        const data = await response.json();\r\n        throw new Error(data.message);\r\n      }\r\n    } catch (error) {\r\n      set({\r\n        error: error instanceof Error ? error.message : 'Failed to like item',\r\n      });\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  passItem: async (itemId: string) => {\r\n    try {\r\n      set({ error: null });\r\n      const token = useAuthStore.getState().token;\r\n      const response = await fetch(`${API_URL}/interactions/pass/${itemId}`, {\r\n        method: 'POST',\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n      });\r\n\r\n      if (!response.ok) {\r\n        const data = await response.json();\r\n        throw new Error(data.message);\r\n      }\r\n    } catch (error) {\r\n      set({\r\n        error: error instanceof Error ? error.message : 'Failed to pass item',\r\n      });\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  saveItem: async (itemId: string) => {\r\n    try {\r\n      set({ error: null });\r\n      const token = useAuthStore.getState().token;\r\n      const response = await fetch(`${API_URL}/interactions/save/${itemId}`, {\r\n        method: 'POST',\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n      });\r\n\r\n      if (!response.ok) {\r\n        const data = await response.json();\r\n        throw new Error(data.message);\r\n      }\r\n\r\n      // Reload saved items after saving\r\n      await get().loadSavedItems();\r\n    } catch (error) {\r\n      set({\r\n        error: error instanceof Error ? error.message : 'Failed to save item',\r\n      });\r\n      throw error;\r\n    }\r\n  },\r\n}));"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}