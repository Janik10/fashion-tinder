{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport { create } from 'zustand';\nimport { useAuthStore } from \"./auth\";\nimport { API_URL } from \"../config\";\nexport var useItemStore = create(function (set, get) {\n  return {\n    feed: [],\n    savedItems: [],\n    isLoading: false,\n    error: null,\n    loadFeed: function () {\n      var _loadFeed = _asyncToGenerator(function* (cursor) {\n        try {\n          set({\n            isLoading: true,\n            error: null\n          });\n          var token = useAuthStore.getState().token;\n          var params = new URLSearchParams();\n          if (cursor) params.append('offset', cursor);\n          params.append('limit', '20');\n          var response = yield fetch(`${API_URL}/feed?${params}`, {\n            headers: {\n              Authorization: `Bearer ${token}`\n            }\n          });\n          var data = yield response.json();\n          if (!response.ok) throw new Error(data.message);\n          set({\n            feed: cursor ? [].concat(_toConsumableArray(get().feed), _toConsumableArray(data.items)) : data.items,\n            isLoading: false\n          });\n        } catch (error) {\n          set({\n            isLoading: false,\n            error: error instanceof Error ? error.message : 'Failed to load feed'\n          });\n          throw error;\n        }\n      });\n      function loadFeed(_x) {\n        return _loadFeed.apply(this, arguments);\n      }\n      return loadFeed;\n    }(),\n    loadSavedItems: function () {\n      var _loadSavedItems = _asyncToGenerator(function* () {\n        try {\n          set({\n            isLoading: true,\n            error: null\n          });\n          var token = useAuthStore.getState().token;\n          var response = yield fetch(`${API_URL}/me/saves`, {\n            headers: {\n              Authorization: `Bearer ${token}`\n            }\n          });\n          var data = yield response.json();\n          if (!response.ok) throw new Error(data.message);\n          set({\n            savedItems: data.items || data,\n            isLoading: false\n          });\n        } catch (error) {\n          set({\n            isLoading: false,\n            error: error instanceof Error ? error.message : 'Failed to load saved items'\n          });\n          throw error;\n        }\n      });\n      function loadSavedItems() {\n        return _loadSavedItems.apply(this, arguments);\n      }\n      return loadSavedItems;\n    }(),\n    likeItem: function () {\n      var _likeItem = _asyncToGenerator(function* (itemId) {\n        try {\n          set({\n            error: null\n          });\n          var feed = get().feed;\n          set({\n            feed: feed.slice(1)\n          });\n        } catch (error) {\n          set({\n            error: error instanceof Error ? error.message : 'Failed to like item'\n          });\n        }\n      });\n      function likeItem(_x2) {\n        return _likeItem.apply(this, arguments);\n      }\n      return likeItem;\n    }(),\n    passItem: function () {\n      var _passItem = _asyncToGenerator(function* (itemId) {\n        try {\n          set({\n            error: null\n          });\n          var feed = get().feed;\n          set({\n            feed: feed.slice(1)\n          });\n        } catch (error) {\n          set({\n            error: error instanceof Error ? error.message : 'Failed to pass item'\n          });\n        }\n      });\n      function passItem(_x3) {\n        return _passItem.apply(this, arguments);\n      }\n      return passItem;\n    }(),\n    saveItem: function () {\n      var _saveItem = _asyncToGenerator(function* (itemId) {\n        try {\n          set({\n            error: null\n          });\n          var item = get().feed.find(function (item) {\n            return item.id === itemId;\n          });\n          if (item) {\n            set({\n              savedItems: [].concat(_toConsumableArray(get().savedItems), [item])\n            });\n          }\n        } catch (error) {\n          set({\n            error: error instanceof Error ? error.message : 'Failed to save item'\n          });\n        }\n      });\n      function saveItem(_x4) {\n        return _saveItem.apply(this, arguments);\n      }\n      return saveItem;\n    }()\n  };\n});","map":{"version":3,"names":["create","useAuthStore","API_URL","useItemStore","set","get","feed","savedItems","isLoading","error","loadFeed","_loadFeed","_asyncToGenerator","cursor","token","getState","params","URLSearchParams","append","response","fetch","headers","Authorization","data","json","ok","Error","message","concat","_toConsumableArray","items","_x","apply","arguments","loadSavedItems","_loadSavedItems","likeItem","_likeItem","itemId","slice","_x2","passItem","_passItem","_x3","saveItem","_saveItem","item","find","id","_x4"],"sources":["E:/fashion-tinder/frontend/src/store/items.ts"],"sourcesContent":["import { create } from 'zustand';\r\nimport type { Item } from '../types/item';\r\nimport { useAuthStore } from './auth';\r\nimport { API_URL } from '../config';\r\nimport { StateCreator } from 'zustand';\r\n\r\ninterface ItemState {\r\n  feed: Item[];\r\n  savedItems: Item[];\r\n  isLoading: boolean;\r\n  error: string | null;\r\n  loadFeed: (cursor?: string) => Promise<void>;\r\n  loadSavedItems: () => Promise<void>;\r\n  likeItem: (itemId: string) => Promise<void>;\r\n  passItem: (itemId: string) => Promise<void>;\r\n  saveItem: (itemId: string) => Promise<void>;\r\n}\r\n\r\nexport const useItemStore = create<ItemState>((set: any, get: any) => ({\r\n  feed: [],\r\n  savedItems: [],\r\n  isLoading: false,\r\n  error: null,\r\n\r\n  loadFeed: async (cursor?: string) => {\r\n    try {\r\n      set({ isLoading: true, error: null });\r\n      const token = useAuthStore.getState().token;\r\n      \r\n      const params = new URLSearchParams();\r\n      if (cursor) params.append('offset', cursor);\r\n      params.append('limit', '20');\r\n      \r\n      const response = await fetch(`${API_URL}/feed?${params}`, {\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n      });\r\n\r\n      const data = await response.json();\r\n      if (!response.ok) throw new Error(data.message);\r\n\r\n      set({\r\n        feed: cursor ? [...get().feed, ...data.items] : data.items,\r\n        isLoading: false,\r\n      });\r\n    } catch (error) {\r\n      set({\r\n        isLoading: false,\r\n        error: error instanceof Error ? error.message : 'Failed to load feed',\r\n      });\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  loadSavedItems: async () => {\r\n    try {\r\n      set({ isLoading: true, error: null });\r\n      const token = useAuthStore.getState().token;\r\n      const response = await fetch(`${API_URL}/me/saves`, {\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n      });\r\n\r\n      const data = await response.json();\r\n      if (!response.ok) throw new Error(data.message);\r\n\r\n      set({ savedItems: data.items || data, isLoading: false });\r\n    } catch (error) {\r\n      set({\r\n        isLoading: false,\r\n        error: error instanceof Error ? error.message : 'Failed to load saved items',\r\n      });\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  likeItem: async (itemId: string) => {\r\n    try {\r\n      set({ error: null });\r\n      // Remove the first item from the feed\r\n      const feed = get().feed;\r\n      set({ feed: feed.slice(1) });\r\n      // In a real app, this would make an API call\r\n    } catch (error) {\r\n      set({\r\n        error: error instanceof Error ? error.message : 'Failed to like item',\r\n      });\r\n    }\r\n  },\r\n\r\n  passItem: async (itemId: string) => {\r\n    try {\r\n      set({ error: null });\r\n      // Remove the first item from the feed\r\n      const feed = get().feed;\r\n      set({ feed: feed.slice(1) });\r\n      // In a real app, this would make an API call\r\n    } catch (error) {\r\n      set({\r\n        error: error instanceof Error ? error.message : 'Failed to pass item',\r\n      });\r\n    }\r\n  },\r\n\r\n  saveItem: async (itemId: string) => {\r\n    try {\r\n      set({ error: null });\r\n      // Add to saved items locally\r\n      const item = get().feed.find(item => item.id === itemId);\r\n      if (item) {\r\n        set({ savedItems: [...get().savedItems, item] });\r\n      }\r\n      // In a real app, this would make an API call\r\n    } catch (error) {\r\n      set({\r\n        error: error instanceof Error ? error.message : 'Failed to save item',\r\n      });\r\n    }\r\n  },\r\n}));"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}